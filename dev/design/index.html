<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Design and Internals ¬∑ GeometricAlgebra.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">GeometricAlgebra.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">GeometricAlgebra</a></li><li class="is-active"><a class="tocitem" href>Design and Internals</a><ul class="internal"><li><a class="tocitem" href="#Multivector-Types"><span>Multivector Types</span></a></li><li><a class="tocitem" href="#Metric-Signatures"><span>Metric Signatures</span></a></li><li><a class="tocitem" href="#Symbolic-Algebra-and-Code-Generation"><span>Symbolic Algebra and Code Generation</span></a></li></ul></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Design and Internals</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Design and Internals</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Jollywatt/GeometricAlgebra.jl/blob/master/docs/src/design.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Design-and-Internals"><a class="docs-heading-anchor" href="#Design-and-Internals">Design and Internals</a><a id="Design-and-Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Design-and-Internals" title="Permalink"></a></h1><h2 id="Multivector-Types"><a class="docs-heading-anchor" href="#Multivector-Types">Multivector Types</a><a id="Multivector-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Multivector-Types" title="Permalink"></a></h2><p>There are three concrete types for representing elements in a geometric algebra, arranged in the following type hierarchy:</p><pre><code class="nohighlight hljs">                   AbstractMultivector{Sig}
                     /                  \
   HomogeneousMultivector{Sig,K}    Multivector{Sig,S}
       /                \                             
Blade{Sig,K,T}    KVector{Sig,K,S}                
                                                   
                  ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ CompositeMultivector{Sig,S} ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ</code></pre><ul><li><code>Blade</code>: a scalar multiple of a wedge product of orthogonal basis vectors.</li><li><code>KVector</code>: a <span>$k$</span>-vector or homogeneous multivector; a sum of same-grade blades.</li><li><code>Multivector</code>: a general multivector. All elements in a geometric  algebra can be represented as this type (though not most efficiently).</li></ul><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The mathematical definition of a <span>$k$</span>-blade is the wedge product of <span>$k$</span> <em>vectors</em>, not necessarily <em>basis</em> vectors (as in <code>Blade</code>). Thus, not all <span>$k$</span>-blades are representable as a <code>Blade</code>, but as a <code>KVector</code> (or <code>Multivector</code>) instead.</p></div></div><p>These types have up to three of type parameters:</p><ul><li><code>Sig</code>: The metric signature which defines the geometric algebra. This can be any  all-bits value which satisfies the <a href="#sig-interface">metric signature interface</a>.</li><li><code>T</code>: The numerical type of the coefficient of a <code>Blade</code>.</li><li><code>K</code>: An <code>Int</code> specifying the grade of a <code>HomogeneousMultivector</code>.</li><li><code>S</code>: The storage type of the components vector of a <code>CompositeMultivector</code>.</li></ul><h2 id="Metric-Signatures"><a class="docs-heading-anchor" href="#Metric-Signatures">Metric Signatures</a><a id="Metric-Signatures-1"></a><a class="docs-heading-anchor-permalink" href="#Metric-Signatures" title="Permalink"></a></h2><p>The metric signature type parameter <code>Sig</code> defines the dimension of the geometric algebra and the norms of its standard orthonormal basis vectors. Additionally, it allows various default behaviours to be customised through method definitions which dispatch on <code>Sig</code>, as detailed in <a href="#sig-interface">the metric signature interface</a>.</p><p>By default, the following metric signature types are implemented:</p><ul><li><code>Int</code>, defining a Euclidean metric of that dimension,</li><li><code>Tuple</code>, defining the norms of each basis vector,</li><li><code>NamedTuple</code>, defining basis vector labels as well as norms,</li><li><a href="../reference/#GeometricAlgebra.Cl"><code>Cl</code></a>, a type resembling the notation <span>$Cl(p, q, r)$</span> common in literature.</li></ul><pre><code class="language-julia-repl hljs">julia&gt; @basis 2
[ Info: Defined basis blades v, v1, v2, v12

julia&gt; basis((t=-1, x=1, y=1, z=1)) |&gt; prod
Blade{(t = -1, x = 1, y = 1, z = 1), 4, Int64}:
 1 txyz
</code></pre><h3 id="sig-interface"><a class="docs-heading-anchor" href="#sig-interface">The metric signature interface</a><a id="sig-interface-1"></a><a class="docs-heading-anchor-permalink" href="#sig-interface" title="Permalink"></a></h3><p>The metric signature type parameter may be any <code>isbits</code> value satisying the following interface. As well as defining the geometric algebra, the signature is used to specify basis blade labels, the default array type for multivector components, and other metadata.</p><table><tr><th style="text-align: left">Required methods</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left"><code>dimension(sig)</code></td><td style="text-align: left">The dimension of the underlying vector space, or number of basis vectors.</td></tr><tr><td style="text-align: left"><code>basis_vector_norm(sig, i)</code></td><td style="text-align: left">The norm of the <code>i</code>th basis vector.</td></tr></table><table><tr><th style="text-align: left">Optional methods</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left"><code>show_signature(io, sig)</code></td><td style="text-align: left">Show the metric signature in a compact human-readable form.</td></tr><tr><td style="text-align: left"><code>show_basis_blade(io, sig, indices)</code></td><td style="text-align: left">Print a basis blade with the given indices (e.g., <code>v12</code> or <code>ùíÜ‚ÇÅ‚àßùíÜ‚ÇÇ</code>).</td></tr><tr><td style="text-align: left"><code>componentstype(sig, N, T)</code></td><td style="text-align: left">Preferred array type for <code>CompositeMultivector</code> components. (Default is <code>Vector{T}</code> in low dimensions and <code>SparseVector{T}</code> otherwise.)</td></tr><tr><td style="text-align: left"><code>symbolic_optim(sig)</code></td><td style="text-align: left">Whether to use symbolic code generation to optimise multivector products. (Default is true for low dimensions.)</td></tr></table><p>Below is an example of how one might define a geometric algebra with specific behaviours:</p><pre><code class="language-julia hljs">struct DiracGamma end

# define the algebra
GeometricAlgebra.dimension(::DiracGamma) = 4
GeometricAlgebra.basis_vector_norm(::DiracGamma, i) = i &gt; 1 ? -1 : +1

# set the preferred component storage type
using StaticArrays
GeometricAlgebra.componentstype(::DiracGamma, N, T) = MVector{N,T}

# custom labels
function GeometricAlgebra.show_basis_blade(io, ::DiracGamma, indices)
	print(io, join(&quot;Œ≥&quot;.*GeometricAlgebra.superscript.(indices .- 1)))
end

basis(DiracGamma())
# output
4-element Vector{Blade{DiracGamma(), 1, Int64}}:
 Œ≥‚Å∞
 Œ≥¬π
 Œ≥¬≤
 Œ≥¬≥</code></pre><h2 id="Symbolic-Algebra-and-Code-Generation"><a class="docs-heading-anchor" href="#Symbolic-Algebra-and-Code-Generation">Symbolic Algebra and Code Generation</a><a id="Symbolic-Algebra-and-Code-Generation-1"></a><a class="docs-heading-anchor-permalink" href="#Symbolic-Algebra-and-Code-Generation" title="Permalink"></a></h2><p>Thanks to the wonderful <a href="https://symbolicutils.juliasymbolics.org/"><code>SymbolicUtils</code></a> package, the same code originally written for numerical multivectors readily works with symbolic components. For example, we can compute the product of two vectors symbolically as follows:</p><pre><code class="language-julia-repl hljs">julia&gt; GeometricAlgebra.symbolic_components.([:x, :y], 3)
2-element Vector{Vector{SymbolicUtils.Term{Real, Nothing}}}:
 [x[1], x[2], x[3]]
 [y[1], y[2], y[3]]

julia&gt; KVector{3,1}.(ans)
2-element Vector{KVector{3, 1, Vector{SymbolicUtils.Term{Real, Nothing}}}}:
 x[1]v1 + x[2]v2 + x[3]v3
 y[1]v1 + y[2]v2 + y[3]v3

julia&gt; prod(ans)
8-component Multivector{3, Vector{Any}}:
 x[1]*y[1] + x[2]*y[2] + x[3]*y[3]
 x[1]*y[2] - x[2]*y[1] v12 + x[1]*y[3] - x[3]*y[1] v13 + x[2]*y[3] - x[3]*y[2] v23
</code></pre><p>This makes it easy to optimize multivector operations by first performing the general calculation symbolically, then converting the resulting expression into unrolled code.  (See <a href="../reference/#GeometricAlgebra.symbolic_optim-Union{Tuple{Sig}, Tuple{Any, Vararg{Union{Type{var&quot;#s22&quot;}, var&quot;#s22&quot;} where var&quot;#s22&quot;&lt;:AbstractMultivector{Sig}}}} where Sig"><code>symbolic_optim()</code></a> for details.)</p><p>By default, symbolic code generation is used for most products in up to eight dimensions (above which general algebraic expressions become unwieldy). This can be changed a per-algebra basis by defining methods for <a href="../reference/#GeometricAlgebra.use_symbolic_optim-Tuple{Any}"><code>use_symbolic_optim()</code></a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">¬´ GeometricAlgebra</a><a class="docs-footer-nextpage" href="../reference/">Reference ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 17 October 2022 10:20">Monday 17 October 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
