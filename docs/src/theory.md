```@meta
CurrentModule = GeometricAlgebra
DocTestSetup = quote
	using GeometricAlgebra
end
```

```@setup ga
using GeometricAlgebra
```

# Background Theory

This is a brief overview of the mathematics of geometric algebra, using `GeometricAlgebra.jl` to explain features along the way.


## Definition

[Geometric algebra](https://en.wikipedia.org/wiki/Geometric_algebra) is what you get when vectors in a space are allowed to be multiplied freely,[^1] with the rule that a vector ``ğ’–`` multiplied by itself gives its dot product, ``ğ’–^2 = ğ’–â‹…ğ’–``.
All other features of geometric algebra follow from this relation (and from associativity ``ğ’–(ğ’—ğ’˜) = (ğ’–ğ’—)ğ’˜`` and linearity ``(Î»ğ’–)ğ’— = ğ’–(Î»ğ’—)`` with scalars ``Î»``).

[^1]: â€œMultiplied freelyâ€ means vectors ``ğ’–, ğ’—, ğ’˜`` may always be combined with a product which is associative and linear. More formally, ``ğ’¢(V, â‹…)`` is the â€œfreestâ€ unital associative algebra generated by ``V`` satisfying ``ğ’–^2 = ğ’–â‹…ğ’–`` for all ``ğ’– âˆˆ V``.

The definition becomes clearer after choosing a basis. In geometric algebras, orthonormal vectors ``ğ’—_1, ..., ğ’—_n âˆˆ V`` multiply according to the rules[^2]
- ``ğ’—_i^2 = ğ’—_iâ‹…ğ’—_i``,
- ``ğ’—_iğ’—_j = -ğ’—_jğ’—_i`` where ``i â‰  j``.
The basis vector _norms_ ``ğ’—_iâ‹…ğ’—_i`` may be ``+1``, ``-1`` or ``0`` depending on the [metric signature](https://en.wikipedia.org/wiki/Metric_signature) of the [inner product](https://en.wikipedia.org/wiki/Inner_product_space) ``â‹…`` on ``V``.

[^2]: The first rule is by the defining relation ``ğ’–^2 = ğ’–â‹…ğ’–``, and the second rule follows from the first for orthogonal vectors.

!!! info
	A formal construction of the geometric algebra ``ğ’¢(V, â‹…)`` over a vector space ``V`` with inner product ``â‹…`` is as the [quotient](https://en.wikipedia.org/wiki/Quotient_ring#For_algebras_over_a_ring) `` ğ’¢(V, â‹…) â‰… V^âŠ— \big/ I `` of the tensor algebra ``V^âŠ— = â„ âŠ• V âŠ• (V âŠ— V) âŠ• â‹¯`` by the [ideal]() ``I`` generated by elements of the form ``ğ’– âŠ— ğ’– - ğ’–â‹…ğ’–`` for vectors ``ğ’– âˆˆ V``.
	But this is usually not the most helpful definition to start with.


Geometric algebras are also called (real) [Clifford algebras](https://en.wikipedia.org/wiki/Clifford_algebra) and are denoted ``ğ’¢(V, â‹…)`` or ``Cl(V, q)``, where ``â‹…`` has the [associated quadratic form](https://en.wikipedia.org/wiki/Bilinear_form#Derived_quadratic_form) ``q``.
Usually, we have ``V = â„^n`` and write ``ğ’¢(n)`` for the resulting algebra with ``â‹…`` as the standard Euclidean dot product. Write ``ğ’¢(p, q)`` for ``(p + q)``-dimensions with an inner product having ``p`` basis vectors with ``ğ’—_i^2 = +1`` and ``q`` with ``ğ’—_i^2 = -1``.


## Graded structure

An ``n``-dimensional geometric algebra ``ğ’¢`` has a _graded structure_: it is the direct sum of fixed-grade subspaces
```math
ğ’¢ = â¨_{k=0}^n âˆ§^n V = â„ âŠ• V âŠ• âˆ§^2 V âŠ• âˆ§^3 V âŠ• â‹¯
```
Grade zero elements in ``âˆ§^0V = â„`` are scalars; grade one elements in ``âˆ§^1V = V`` are vectors; and grade-``k`` elements in ``âˆ§^k V`` are ``k``-vectors or **homogeneous multivectors**.
Elements of ``ğ’¢`` may contain parts of differing grade, and when they do they are called **(inhomogeneous) multivectors**.

There are no non-zero ``k``-vectors outside the range ``0 â‰¤ k â‰¤ n``, so the subspace of **pseudoscalars**, ``âˆ§^nV``, are the highest-grade objects.

Grade | Dimension | Name 
:----:|:---------:|:----
``0`` | ``1`` | scalars
``1`` | ``n`` | vectors
``2`` | ``\binom{n}{2}`` | bivectors
``3`` | ``\binom{n}{3}`` | trivectors
``â‹®`` | ``â‹®`` | ``â‹®``
``k`` | ``\binom{n}{k}`` | ``k``-vectors
``â‹®`` | ``â‹®`` | ``â‹®``
``n - 1`` | ``n`` | pseudovectors
``n`` | ``1`` | pseudoscalars
all | ``2^n`` | multivectors

Notice that subspaces of grade ``k`` and ``n - k`` have the same dimension.
Subspaces ``âˆ§^kV`` and their â€œpseudoâ€-prefixed counterparts ``âˆ§^{n - k}V`` are associated through [Hodge duality](https://en.wikipedia.org/wiki/Hodge_star_operator).

If ``A âˆˆ ğ’¢`` is a multivector, then denote its grade ``k`` part as
```math
âŸ¨AâŸ©_k âˆˆ âˆ§^kV
\quad\text{(grade projection)}
```
In code, grade projection is achieved with `grade(A, k)`:
```@repl ga
A = Multivector{4,0:4}(rand(-10:10, 2^4))
grade(A, 3)
```

## Blades and Multivectors

### Basis blades

If ``ğ’—_1, ..., ğ’—_n`` are orthonormal basis vectors, then products of the form
```math
ğ’—_{i_1}ğ’—_{i_2}â‹¯ğ’—_{i_k}
```
where ``i_1, ..., i_k`` are distinct are called **basis blades**.

Scalar multiples of basis blades are represented with the `BasisBlade{Sig,K,T}` type, which encodes indices ``i_1, ..., i_k`` as binary-ones.
```@repl ga
BasisBlade{4}(0b1011 => 42)
```
You can generate all basis blades (of a given grade) for an algebra with [`basis()`](@ref).
```@repl ga
basis(4, grade=2)
```

### Blades

A product of ``k`` distinct, mutually orthogonal vectors forms a **``k``-blade**.
Equivalently, a ``k``-blade is a ``âˆ§``-product of ``k`` many vectors.

Not all blades are representable as basis blades in the current choice of basis. For example, in ``ğ’¢(3)`` the product ``ğ’—_1(ğ’—_2 + ğ’—_3)`` is a blade (since ``ğ’—_1`` and ``ğ’—_2 + ğ’—_3`` are orthogonal), but not a basis blade.

General blades are represented as `Multivector`s.
```@repl ga
@basis 3
v1*(v2 + v3)
```

### Multivector

A sum of ``k``-blades

## Wedge and Inner products


## Fundamental Automorphisms

Generally, operations like complex conjugation ``\overline{AB} = \bar{A}\bar{B}`` or matrix transposition ``(AB)^âŠº = B^âŠºA^âŠº`` are useful because they preserve or reverse multiplication. (These are called [automorphisms](https://en.wikipedia.org/wiki/Automorphism) and [antiautomorphisms](https://en.wikipedia.org/wiki/Antihomomorphism) respectively.)

Geometric algebras possess some important automorphisms: _reversion_ ``\tilde{A}`` and _grade involution_.

### Reversion

`~A` or [`reversion(a)`](@ref)

Reversion ``\tilde{A}`` is defined on multivectors ``A`` and ``B`` by the property
```math
\widetilde{AB} = \tilde{B}\tilde{A}
```
and by ``\tilde{ğ’–} = ğ’–`` for vectors.
Computing the reversion looks like reversing the order of the geometric product:
```@repl ga
~(v1*v2*v3) == v3*v2*v1
```

Swapping orthogonal basis vectors ``ğ’—_iğ’—_j â†¦ ğ’—_jğ’—_i = -ğ’—_iğ’—_j`` introduces an overall factor of ``-1``, and it takes ``\binom{k}{2} = \frac{k(k - 1)}{2}`` swaps to reverse ``k`` many basis vectors.
Thus, the reversion of a homogeneous ``k``-vector ``A_k`` is given by
```math
\tilde{A_k} = (-1)^{k(k - 1)/2} A_k
```

Grade | Reversion sign
:----:|:-----:
``k`` | ``(-1)^{k(k - 1)/2}``
``0`` | ``+1``
``1`` | ``+1``
``2`` | ``-1``
``3`` | ``-1``
``4`` | ``+1``
``5`` | ``+1``
``6`` | ``-1``
``7`` | ``-1``
``â‹®`` | ``â‹®``

### Grade involution

[`involution(A)`](@ref)

Grade involution is the operation of flipping space through the origin, so that vectors ``ğ’– â†¦ -ğ’–`` are sent to their negative. Involution is required to satisfy
```math
\mathsf{involution}(AB) = \mathsf{involution}(A)\mathsf{involution}(B)
```
which means a ``k``-blade of the form ``B = ğ’—_1 âˆ§ \cdots âˆ§ ğ’—_k`` gets sent to ``(-ğ’—_1) âˆ§ \cdots âˆ§ (-ğ’—_k) = (-1)^k B``.
This holds for blades, and so by linearity, for any ``k``-vector ``A`` we have
```math
\mathsf{involution}(A_k) = (-1)^k A_k
```

## Pseudoscalars and Duality

## Reflections and Rotors

## Glossary

| Term | Definition | Example |
|------|:-----------|:--------|
| _multivector_ | Any element of a geometric algebra | ``1, ğ’—_1, 1 + ğ’—_1ğ’—_2``
| _``k``-vector_ | A homogeneous multivector, containing only grade-``k`` parts | ``ğ’˜ = ğ’—_1ğ’—_2 + ğ’—_3ğ’—_4`` is a ``2``-vector or _bivector_
| _vector_ | Usually refers to a ``1``-vector, even though every multivector is a â€œvectorâ€ in the linear algebra sense | ``ğ’– = 2ğ’—_1 + ğ’—_2``
| _``k``-blade_ | A ``k``-vector which can be factored as a ``âˆ§``-product of ``k``-many vectors | ``ğ’–âˆ§ğ’—_3 = 2ğ’—_1ğ’—_3 + ğ’—_2ğ’—_3`` is a ``2``-blade, but ``ğ’˜`` is not
| _basis blade_ | A ``k``-blade which is a scalar multiple of the product of orthonormal basis vectors | ``1, 2ğ’—_1ğ’—_3, -ğ’—_1ğ’—_2ğ’—_3``


## References

```@bibliography
```


# Extras


## Features of geometric algebra

Geometric algebra unifies many concepts in geometry, linear algebra and physics by offering an elegant language for geometric objects and the transformations on them. In particular, it
- provides a uniform formalism for rotations in any number of dimensions;
- efficiently models Euclidean, projective, and conformal geometries;
- unifies the dot product ``â‹…`` and wedge product ``âˆ§`` from exterior calculus into the same algebra, creating an _invertible_ geometric product;
- consists of elements with concrete geometric interpretations;
- generalises the complex numbers ``â„‚``, quaternions ``â„``, Pauli and Dirac matrix algebras and realises them as algebras over _real_ vector spaces.

For more thorough introductions, see [Gull1993](@cite) (good for physicists).

If ``ğ’—_1, ..., ğ’—_n âˆˆ V`` are orthonormal basis vectors, then in the geometric algebra ``ğ’¢(V, â‹…)``:
- Elements are generally non-commutative.
  E.g., ``ğ’—_1ğ’—_2 = -ğ’—_2ğ’—_1``.
- There are more elements than just vectors in ``V``: now there are _multivectors_ of grades ``0, ..., n``.
  E.g., ``ğ’—_1ğ’—_2`` is a bivector.
- Multiplication can produce multivectors of _mixed grade_.
  E.g., if ``ğ’– = 2ğ’—_1 + ğ’—_2`` is a vector, then ``ğ’–ğ’—_2 = 1 + 2ğ’—_1ğ’—_2`` is a ``\{0, 2\}``-multivector with scalar and bivector parts.
- Most elements are invertible.
  E.g., if ``ğ’–`` is the vector above, then ``ğ’–^{-1} = \frac25 ğ’—_1 + \frac15 ğ’—_2`` and ``ğ’–ğ’–^{-1} = 1``.
- Other products, including the wedge ``âˆ§``, can be defined in terms of the geometric product and _grade projection_.
  E.g., ``ğ’–âˆ§ğ’—_2 = 2ğ’—_1ğ’—_2`` takes the highest-grade part of the product ``ğ’–ğ’—_2 = 1 + 2ğ’—_1ğ’—_2``.




### Example in ``â„^3``

To see what the definition means, weâ€™ll look at the example ``V = â„^3`` with the usual Euclidean dot product: the geometric algebra of 3D space, ``ğ’¢(â„^3, â‹…)`` or ``ğ’¢(3)`` or ``Cl(3)``.

We may get the standard orthonormal basis ``ğ’—_1, ğ’—_2, ğ’—_3 âˆˆ â„^3`` using
```@repl ga
v1, v2, v3 = basis(3)
```
From the defining relation ``ğ’–^2 = ğ’–â‹…ğ’–``, we know how to multiply ``ğ’—_1`` with itself:
```@repl ga
v1*v1
```

```@raw html
<details>
<summary>But what about <code>v1*v2</code>?</summary>
```
The relation ``ğ’–^2 = ğ’–â‹…ğ’–`` doesnâ€™t immediately say how to multiply two different vectors â€” but everything about geometric product follows from it. Notice that if we apply the relation to ``ğ’– + ğ’—`` instead of ``ğ’–``, we find that
```math
\begin{align*}
	(ğ’– + ğ’—)^2 &= (ğ’– + ğ’—)â‹…(ğ’– + ğ’—)
\\	ğ’–^2 + ğ’–ğ’— + ğ’—ğ’– + ğ’—^2 &= ğ’–â‹…ğ’– + 2ğ’–â‹…ğ’— + ğ’—â‹…ğ’—
\\	ğ’–ğ’— + ğ’—ğ’– &= 2ğ’–â‹…ğ’—
\end{align*}
```
In our case, ``ğ’—_1â‹…ğ’—_2 = 0`` are orthogonal, so this means
```math
ğ’—_1ğ’—_2 = -ğ’—_2ğ’—_1
```
which we can check with code:
```@raw html
</details><br>
```
```@repl 3d
v1*v2
v2*v1
```
This is a new kind of object â€” a grade-2 bivector in 3D space:
```@repl 3d
grade(v1*v2), dimension(v1*v2)
```
In fact, there are ``2^3 = 8`` different linearly independent objects in the geometric algebra ``ğ’¢(3)``.
We can retrieve a basis for the full algebra with the `grade=:all` option:
```@repl 3d
basis(3, grade=:all)
```
To display a complete multiplication table for ``ğ’¢(3)``, you may use [`cayleytable`](@ref):
```@repl 3d
cayleytable(3)
```
