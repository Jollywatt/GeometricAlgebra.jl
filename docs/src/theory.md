```@meta
CurrentModule = GeometricAlgebra
DocTestSetup = quote
	using GeometricAlgebra
end
```

```@setup ga
using GeometricAlgebra
```

# Background Theory

This is a brief overview of the mathematics of geometric algebra, using `GeometricAlgebra.jl` to explain features along the way.


## Definition

[Geometric algebra](https://en.wikipedia.org/wiki/Geometric_algebra) is what you get when vectors in a space are allowed to be multiplied freely,[^1] with the rule that a vector ``𝒖`` multiplied by itself gives its dot product, ``𝒖^2 = 𝒖⋅𝒖``.
All other features of geometric algebra follow from this relation (and from associativity ``𝒖(𝒗𝒘) = (𝒖𝒗)𝒘`` and linearity ``(λ𝒖)𝒗 = 𝒖(λ𝒗)`` with scalars ``λ``).

[^1]: “Multiplied freely” means vectors ``𝒖, 𝒗, 𝒘`` may always be combined with a product which is associative and linear. More formally, ``𝒢(V, ⋅)`` is the “freest” unital associative algebra generated by ``V`` satisfying ``𝒖^2 = 𝒖⋅𝒖`` for all ``𝒖 ∈ V``.

The definition becomes clearer after choosing a basis. In geometric algebras, orthonormal vectors ``𝒗_1, ..., 𝒗_n ∈ V`` multiply according to the rules[^2]
- ``𝒗_i^2 = 𝒗_i⋅𝒗_i``,
- ``𝒗_i𝒗_j = -𝒗_j𝒗_i`` where ``i ≠ j``.
The basis vector _norms_ ``𝒗_i⋅𝒗_i`` may be ``+1``, ``-1`` or ``0`` depending on the [metric signature](https://en.wikipedia.org/wiki/Metric_signature) of the [inner product](https://en.wikipedia.org/wiki/Inner_product_space) ``⋅`` on ``V``.

[^2]: The first rule is by the defining relation ``𝒖^2 = 𝒖⋅𝒖``, and the second rule follows from the first for orthogonal vectors.

!!! info
	A formal construction of the geometric algebra ``𝒢(V, ⋅)`` over a vector space ``V`` with inner product ``⋅`` is as the [quotient](https://en.wikipedia.org/wiki/Quotient_ring#For_algebras_over_a_ring) `` 𝒢(V, ⋅) ≅ V^⊗ \big/ I `` of the tensor algebra ``V^⊗ = ℝ ⊕ V ⊕ (V ⊗ V) ⊕ ⋯`` by the [ideal]() ``I`` generated by elements of the form ``𝒖 ⊗ 𝒖 - 𝒖⋅𝒖`` for vectors ``𝒖 ∈ V``.
	But this is usually not the most helpful definition to start with.


Geometric algebras are also called (real) [Clifford algebras](https://en.wikipedia.org/wiki/Clifford_algebra) and are denoted ``𝒢(V, ⋅)`` or ``Cl(V, q)``, where ``⋅`` has the [associated quadratic form](https://en.wikipedia.org/wiki/Bilinear_form#Derived_quadratic_form) ``q``.
Usually, we have ``V = ℝ^n`` and write ``𝒢(n)`` for the resulting algebra with ``⋅`` as the standard Euclidean dot product. Write ``𝒢(p, q)`` for ``(p + q)``-dimensions with an inner product having ``p`` basis vectors with ``𝒗_i^2 = +1`` and ``q`` with ``𝒗_i^2 = -1``.


## Graded structure

An ``n``-dimensional geometric algebra ``𝒢`` has a _graded structure_: it is the direct sum of fixed-grade subspaces
```math
𝒢 = ⨁_{k=0}^n ∧^n V = ℝ ⊕ V ⊕ ∧^2 V ⊕ ∧^3 V ⊕ ⋯
```
Grade zero elements in ``∧^0V = ℝ`` are scalars; grade one elements in ``∧^1V = V`` are vectors; and grade-``k`` elements in ``∧^k V`` are ``k``-vectors or **homogeneous multivectors**.
Elements of ``𝒢`` may contain parts of differing grade, and when they do they are called **(inhomogeneous) multivectors**.

There are no non-zero ``k``-vectors outside the range ``0 ≤ k ≤ n``, so the subspace of **pseudoscalars**, ``∧^nV``, are the highest-grade objects.

Grade | Dimension | Name 
:----:|:---------:|:----
``0`` | ``1`` | scalars
``1`` | ``n`` | vectors
``2`` | ``\binom{n}{2}`` | bivectors
``3`` | ``\binom{n}{3}`` | trivectors
``⋮`` | ``⋮`` | ``⋮``
``k`` | ``\binom{n}{k}`` | ``k``-vectors
``⋮`` | ``⋮`` | ``⋮``
``n - 1`` | ``n`` | pseudovectors
``n`` | ``1`` | pseudoscalars
all | ``2^n`` | multivectors

Notice that subspaces of grade ``k`` and ``n - k`` have the same dimension.
Subspaces ``∧^kV`` and their “pseudo”-prefixed counterparts ``∧^{n - k}V`` are associated through [Hodge duality](https://en.wikipedia.org/wiki/Hodge_star_operator).

If ``A ∈ 𝒢`` is a multivector, then denote its grade ``k`` part as
```math
⟨A⟩_k ∈ ∧^kV
\quad\text{(grade projection)}
```
In code, grade projection is achieved with `grade(A, k)`:
```@repl ga
A = Multivector{4,0:4}(rand(-10:10, 2^4))
grade(A, 3)
```

## Blades and Multivectors

### Basis blades

If ``𝒗_1, ..., 𝒗_n`` are orthonormal basis vectors, then products of the form
```math
𝒗_{i_1}𝒗_{i_2}⋯𝒗_{i_k}
```
where ``i_1, ..., i_k`` are distinct are called **basis blades**.

Scalar multiples of basis blades are represented with the `BasisBlade{Sig,K,T}` type, which encodes indices ``i_1, ..., i_k`` as binary-ones.
```@repl ga
BasisBlade{4}(0b1011 => 42)
```
You can generate all basis blades (of a given grade) for an algebra with [`basis()`](@ref).
```@repl ga
basis(4, grade=2)
```

### Blades

A product of ``k`` distinct, mutually orthogonal vectors forms a **``k``-blade**.
Equivalently, a ``k``-blade is a ``∧``-product of ``k`` many vectors.

Not all blades are representable as basis blades in the current choice of basis. For example, in ``𝒢(3)`` the product ``𝒗_1(𝒗_2 + 𝒗_3)`` is a blade (since ``𝒗_1`` and ``𝒗_2 + 𝒗_3`` are orthogonal), but not a basis blade.

General blades are represented as `Multivector`s.
```@repl ga
@basis 3
v1*(v2 + v3)
```

### Multivector

A sum of ``k``-blades

## Wedge and Inner products


## Fundamental Automorphisms

Generally, operations like complex conjugation ``\overline{AB} = \bar{A}\bar{B}`` or matrix transposition ``(AB)^⊺ = B^⊺A^⊺`` are useful because they preserve or reverse multiplication. (These are called [automorphisms](https://en.wikipedia.org/wiki/Automorphism) and [antiautomorphisms](https://en.wikipedia.org/wiki/Antihomomorphism) respectively.)

Geometric algebras possess some important automorphisms: _reversion_ ``\tilde{A}`` and _grade involution_.

### Reversion

`~A` or [`reversion(a)`](@ref)

Reversion ``\tilde{A}`` is defined on multivectors ``A`` and ``B`` by the property
```math
\widetilde{AB} = \tilde{B}\tilde{A}
```
and by ``\tilde{𝒖} = 𝒖`` for vectors.
Computing the reversion looks like reversing the order of the geometric product:
```@repl ga
~(v1*v2*v3) == v3*v2*v1
```

Swapping orthogonal basis vectors ``𝒗_i𝒗_j ↦ 𝒗_j𝒗_i = -𝒗_i𝒗_j`` introduces an overall factor of ``-1``, and it takes ``\binom{k}{2} = \frac{k(k - 1)}{2}`` swaps to reverse ``k`` many basis vectors.
Thus, the reversion of a homogeneous ``k``-vector ``A_k`` is given by
```math
\tilde{A_k} = (-1)^{k(k - 1)/2} A_k
```

Grade | Reversion sign
:----:|:-----:
``k`` | ``(-1)^{k(k - 1)/2}``
``0`` | ``+1``
``1`` | ``+1``
``2`` | ``-1``
``3`` | ``-1``
``4`` | ``+1``
``5`` | ``+1``
``6`` | ``-1``
``7`` | ``-1``
``⋮`` | ``⋮``

### Grade involution

[`involution(A)`](@ref)

Grade involution is the operation of flipping space through the origin, so that vectors ``𝒖 ↦ -𝒖`` are sent to their negative. Involution is required to satisfy
```math
\mathsf{involution}(AB) = \mathsf{involution}(A)\mathsf{involution}(B)
```
which means a ``k``-blade of the form ``B = 𝒗_1 ∧ \cdots ∧ 𝒗_k`` gets sent to ``(-𝒗_1) ∧ \cdots ∧ (-𝒗_k) = (-1)^k B``.
This holds for blades, and so by linearity, for any ``k``-vector ``A`` we have
```math
\mathsf{involution}(A_k) = (-1)^k A_k
```

## Pseudoscalars and Duality

## Reflections and Rotors

## Glossary

| Term | Definition | Example |
|------|:-----------|:--------|
| _multivector_ | Any element of a geometric algebra | ``1, 𝒗_1, 1 + 𝒗_1𝒗_2``
| _``k``-vector_ | A homogeneous multivector, containing only grade-``k`` parts | ``𝒘 = 𝒗_1𝒗_2 + 𝒗_3𝒗_4`` is a ``2``-vector or _bivector_
| _vector_ | Usually refers to a ``1``-vector, even though every multivector is a “vector” in the linear algebra sense | ``𝒖 = 2𝒗_1 + 𝒗_2``
| _``k``-blade_ | A ``k``-vector which can be factored as a ``∧``-product of ``k``-many vectors | ``𝒖∧𝒗_3 = 2𝒗_1𝒗_3 + 𝒗_2𝒗_3`` is a ``2``-blade, but ``𝒘`` is not
| _basis blade_ | A ``k``-blade which is a scalar multiple of the product of orthonormal basis vectors | ``1, 2𝒗_1𝒗_3, -𝒗_1𝒗_2𝒗_3``


## References

```@bibliography
```


# Extras


## Features of geometric algebra

Geometric algebra unifies many concepts in geometry, linear algebra and physics by offering an elegant language for geometric objects and the transformations on them. In particular, it
- provides a uniform formalism for rotations in any number of dimensions;
- efficiently models Euclidean, projective, and conformal geometries;
- unifies the dot product ``⋅`` and wedge product ``∧`` from exterior calculus into the same algebra, creating an _invertible_ geometric product;
- consists of elements with concrete geometric interpretations;
- generalises the complex numbers ``ℂ``, quaternions ``ℍ``, Pauli and Dirac matrix algebras and realises them as algebras over _real_ vector spaces.

For more thorough introductions, see [Gull1993](@cite) (good for physicists).

If ``𝒗_1, ..., 𝒗_n ∈ V`` are orthonormal basis vectors, then in the geometric algebra ``𝒢(V, ⋅)``:
- Elements are generally non-commutative.
  E.g., ``𝒗_1𝒗_2 = -𝒗_2𝒗_1``.
- There are more elements than just vectors in ``V``: now there are _multivectors_ of grades ``0, ..., n``.
  E.g., ``𝒗_1𝒗_2`` is a bivector.
- Multiplication can produce multivectors of _mixed grade_.
  E.g., if ``𝒖 = 2𝒗_1 + 𝒗_2`` is a vector, then ``𝒖𝒗_2 = 1 + 2𝒗_1𝒗_2`` is a ``\{0, 2\}``-multivector with scalar and bivector parts.
- Most elements are invertible.
  E.g., if ``𝒖`` is the vector above, then ``𝒖^{-1} = \frac25 𝒗_1 + \frac15 𝒗_2`` and ``𝒖𝒖^{-1} = 1``.
- Other products, including the wedge ``∧``, can be defined in terms of the geometric product and _grade projection_.
  E.g., ``𝒖∧𝒗_2 = 2𝒗_1𝒗_2`` takes the highest-grade part of the product ``𝒖𝒗_2 = 1 + 2𝒗_1𝒗_2``.




### Example in ``ℝ^3``

To see what the definition means, we’ll look at the example ``V = ℝ^3`` with the usual Euclidean dot product: the geometric algebra of 3D space, ``𝒢(ℝ^3, ⋅)`` or ``𝒢(3)`` or ``Cl(3)``.

We may get the standard orthonormal basis ``𝒗_1, 𝒗_2, 𝒗_3 ∈ ℝ^3`` using
```@repl ga
v1, v2, v3 = basis(3)
```
From the defining relation ``𝒖^2 = 𝒖⋅𝒖``, we know how to multiply ``𝒗_1`` with itself:
```@repl ga
v1*v1
```

```@raw html
<details>
<summary>But what about <code>v1*v2</code>?</summary>
```
The relation ``𝒖^2 = 𝒖⋅𝒖`` doesn’t immediately say how to multiply two different vectors — but everything about geometric product follows from it. Notice that if we apply the relation to ``𝒖 + 𝒗`` instead of ``𝒖``, we find that
```math
\begin{align*}
	(𝒖 + 𝒗)^2 &= (𝒖 + 𝒗)⋅(𝒖 + 𝒗)
\\	𝒖^2 + 𝒖𝒗 + 𝒗𝒖 + 𝒗^2 &= 𝒖⋅𝒖 + 2𝒖⋅𝒗 + 𝒗⋅𝒗
\\	𝒖𝒗 + 𝒗𝒖 &= 2𝒖⋅𝒗
\end{align*}
```
In our case, ``𝒗_1⋅𝒗_2 = 0`` are orthogonal, so this means
```math
𝒗_1𝒗_2 = -𝒗_2𝒗_1
```
which we can check with code:
```@raw html
</details><br>
```
```@repl 3d
v1*v2
v2*v1
```
This is a new kind of object — a grade-2 bivector in 3D space:
```@repl 3d
grade(v1*v2), dimension(v1*v2)
```
In fact, there are ``2^3 = 8`` different linearly independent objects in the geometric algebra ``𝒢(3)``.
We can retrieve a basis for the full algebra with the `grade=:all` option:
```@repl 3d
basis(3, grade=:all)
```
To display a complete multiplication table for ``𝒢(3)``, you may use [`cayleytable`](@ref):
```@repl 3d
cayleytable(3)
```
